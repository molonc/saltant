{% extends "frontend/base.html" %}

{% block content %}
	<div style="text-align: center">
		{% if running_jobs == 1 %}
			<h4>{{ running_jobs }} job in progress</h4>
		{% else %}
			<h4>{{ running_jobs }} jobs in progress</h4>
		{% endif %}
	</div>
	<div style="margin-top: 2.69em;">
		<canvas id="job-chart" width="400" height="230"></canvas>
	</div>
	<div class="small-italic-text" style="text-align: center; margin-top: 2.69em;">
		the above plot shows the current status of jobs created in the last week
	</div>
{% endblock %}

{% block scripts %}
	<script>
		var ctx = document.getElementById("job-chart").getContext('2d');
		var myChart = new Chart(ctx, {
			type: "bar",
			data: {
				labels: {{ labels|safe }},
				datasets: {{ datasets|safe }}
			},
			options: {
				scales: {
					xAxes: [{
						scaleLabel: {
							display: true,
							labelString: "date created"
						},
						stacked: true
					}],
					yAxes: [{
						ticks: {
							beginAtZero: true
						},
						stacked: true
					}]
				},
			}
		});
	</script>
{% endblock %}
